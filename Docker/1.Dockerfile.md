# Dockerfile 


### Add 更高级的复制文件

原路径可以是`URL`,这种情况下，Docker 引擎会试图去下载这个链接的文件放到 <目标路径> 去。下载后的文件权限自动设置为 600

### CMD 容器启动命令  
有两种格式

- shell `CMD <命令>`

- exec  `CMD ["可执行文件", "参数1", "参数2"...]`

Docker 不是虚拟机，容器就是进程。 既然是进程，那么在启动容器的时候，需要指定所运行的程序及参数。

CMD 指令就是用于指定默认的容器主进程的启动命令的。

`ubuntun` 默认 `CMD` 是 `/bin/bash`

我们直接 `docker run -it ubuntu` 会进入bash 

如果使用 `shell` 格式的话，实际的命令会被包装为`sh -c` 的参数的形式进行执行。

CMD echo $HOME

在实际执行中，会将其变更为：

CMD [ "sh", "-c", "echo $HOME" ]


容器应用在前台执行和后台执行

一些初学者 将CMD 写成 ：

`CMD service nginx start`

对于容器而言，其启动程序就是容器应用进程，容器就是为了主进程而存在的，主进程退出，容器就失去了存在的意义，从而退出，其它辅助进程不是它需要关心的东西。

正确的做法是直接执行 nginx 可执行文件，并且要求以前台形式运行。比如：

`CMD ["nginx", "-g", "daemon off;"]`





